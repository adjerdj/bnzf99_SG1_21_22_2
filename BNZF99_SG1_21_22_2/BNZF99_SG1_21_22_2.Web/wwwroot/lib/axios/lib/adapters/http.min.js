/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/axios@0.27.2/lib/adapters/http.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var utils=require("./../utils"),settle=require("./../core/settle"),buildFullPath=require("../core/buildFullPath"),buildURL=require("./../helpers/buildURL"),http=require("http"),https=require("https"),httpFollow=require("follow-redirects").http,httpsFollow=require("follow-redirects").https,url=require("url"),zlib=require("zlib"),VERSION=require("./../env/data").version,transitionalDefaults=require("../defaults/transitional"),AxiosError=require("../core/AxiosError"),CanceledError=require("../cancel/CanceledError"),isHttps=/https:?/,supportedProtocols=["http:","https:","file:"];function setProxy(e,r,t){if(e.hostname=r.host,e.host=r.host,e.port=r.port,e.path=t,r.auth){var o=Buffer.from(r.auth.username+":"+r.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+o}e.beforeRedirect=function(e){e.headers.host=e.host,setProxy(e,r,e.href)}}module.exports=function(e){return new Promise((function(r,t){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var n=function(e){s(),r(e)},a=!1,i=function(e){s(),a=!0,t(e)},u=e.data,l=e.headers,c={};if(Object.keys(l).forEach((function(e){c[e.toLowerCase()]=e})),"user-agent"in c?l[c["user-agent"]]||delete l[c["user-agent"]]:l["User-Agent"]="axios/"+VERSION,utils.isFormData(u)&&utils.isFunction(u.getHeaders))Object.assign(l,u.getHeaders());else if(u&&!utils.isStream(u)){if(Buffer.isBuffer(u));else if(utils.isArrayBuffer(u))u=Buffer.from(new Uint8Array(u));else{if(!utils.isString(u))return i(new AxiosError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",AxiosError.ERR_BAD_REQUEST,e));u=Buffer.from(u,"utf-8")}if(e.maxBodyLength>-1&&u.length>e.maxBodyLength)return i(new AxiosError("Request body larger than maxBodyLength limit",AxiosError.ERR_BAD_REQUEST,e));c["content-length"]||(l["Content-Length"]=u.length)}var h=void 0;e.auth&&(h=(e.auth.username||"")+":"+(e.auth.password||""));var p=buildFullPath(e.baseURL,e.url),f=url.parse(p),d=f.protocol||supportedProtocols[0];if(-1===supportedProtocols.indexOf(d))return i(new AxiosError("Unsupported protocol "+d,AxiosError.ERR_BAD_REQUEST,e));if(!h&&f.auth){var m=f.auth.split(":");h=(m[0]||"")+":"+(m[1]||"")}h&&c.authorization&&delete l[c.authorization];var g=isHttps.test(d),E=g?e.httpsAgent:e.httpAgent;try{buildURL(f.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(r){var x=new Error(r.message);x.config=e,x.url=e.url,x.exists=!0,i(x)}var A={path:buildURL(f.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:l,agent:E,agents:{http:e.httpAgent,https:e.httpsAgent},auth:h};e.socketPath?A.socketPath=e.socketPath:(A.hostname=f.hostname,A.port=f.port);var b,R=e.proxy;if(!R&&!1!==R){var v=d.slice(0,-1)+"_proxy",y=process.env[v]||process.env[v.toUpperCase()];if(y){var B=url.parse(y),P=process.env.no_proxy||process.env.NO_PROXY,T=!0;if(P)T=!P.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||("."===e[0]&&f.hostname.substr(f.hostname.length-e.length)===e||f.hostname===e))}));if(T&&(R={host:B.hostname,port:B.port,protocol:B.protocol},B.auth)){var w=B.auth.split(":");R.auth={username:w[0],password:w[1]}}}}R&&(A.headers.host=f.hostname+(f.port?":"+f.port:""),setProxy(A,R,d+"//"+f.hostname+(f.port?":"+f.port:"")+A.path));var L=g&&(!R||isHttps.test(R.protocol));e.transport?b=e.transport:0===e.maxRedirects?b=L?https:http:(e.maxRedirects&&(A.maxRedirects=e.maxRedirects),e.beforeRedirect&&(A.beforeRedirect=e.beforeRedirect),b=L?httpsFollow:httpFollow),e.maxBodyLength>-1&&(A.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(A.insecureHTTPParser=e.insecureHTTPParser);var q=b.request(A,(function(r){if(!q.aborted){var t=r,o=r.req||q;if(204!==r.statusCode&&"HEAD"!==o.method&&!1!==e.decompress)switch(r.headers["content-encoding"]){case"gzip":case"compress":case"deflate":t=t.pipe(zlib.createUnzip()),delete r.headers["content-encoding"]}var s={status:r.statusCode,statusText:r.statusMessage,headers:r.headers,config:e,request:o};if("stream"===e.responseType)s.data=t,settle(n,i,s);else{var u=[],l=0;t.on("data",(function(r){u.push(r),l+=r.length,e.maxContentLength>-1&&l>e.maxContentLength&&(a=!0,t.destroy(),i(new AxiosError("maxContentLength size of "+e.maxContentLength+" exceeded",AxiosError.ERR_BAD_RESPONSE,e,o)))})),t.on("aborted",(function(){a||(t.destroy(),i(new AxiosError("maxContentLength size of "+e.maxContentLength+" exceeded",AxiosError.ERR_BAD_RESPONSE,e,o)))})),t.on("error",(function(r){q.aborted||i(AxiosError.from(r,null,e,o))})),t.on("end",(function(){try{var r=1===u.length?u[0]:Buffer.concat(u);"arraybuffer"!==e.responseType&&(r=r.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(r=utils.stripBOM(r))),s.data=r}catch(r){i(AxiosError.from(r,null,e,s.request,s))}settle(n,i,s)}))}}}));if(q.on("error",(function(r){i(AxiosError.from(r,null,e,q))})),q.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){var S=parseInt(e.timeout,10);if(isNaN(S))return void i(new AxiosError("error trying to parse `config.timeout` to int",AxiosError.ERR_BAD_OPTION_VALUE,e,q));q.setTimeout(S,(function(){q.abort();var r=e.transitional||transitionalDefaults;i(new AxiosError("timeout of "+S+"ms exceeded",r.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,q))}))}(e.cancelToken||e.signal)&&(o=function(e){q.aborted||(q.abort(),i(!e||e&&e.type?new CanceledError:e))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),utils.isStream(u)?u.on("error",(function(r){i(AxiosError.from(r,e,null,q))})).pipe(q):q.end(u)}))};
//# sourceMappingURL=/sm/8758028c4ddea8a68154ddf38b1dbc0c1309eac15f29ef1fc526fbac0b74a0cf.map